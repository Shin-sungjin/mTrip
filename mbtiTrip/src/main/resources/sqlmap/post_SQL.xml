<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="member">
	
	<insert id="create" parameterType="hashMap" useGeneratedKeys="true" keyProperty="postID">  
	    <![CDATA[
	    insert into Post
	    (postID, userId, title, content, author, post_category) 
	    values
	    (#{userId},#{postID},#{title},#{content},#{author},#{post_category})
	]]>
	</insert>
	
	<select id="post_list" resultType="com.example.test.POST.DTO">
    select QUESTION_ID, ID, Q_SUBJECT, Q_CONTENT, ANSWER, Q_CREATE_DATE, PASSWORD, ISLOGINED
      from QNA
     where <if test="option == 'ID'"> ID like CONCAT('%',#{keyword},'%')</if>
           <if test="option == 'SUBJECT'"> Q_SUBJECT like CONCAT('%',#{keyword},'%')</if>
           <if test="option == 'CONTENT'"> Q_CONTENT like CONCAT('%',#{keyword},'%')</if>
           <if test="option == 'SUBJECT,CONTENT'"> Q_SUBJECT like CONCAT('%',#{keyword},'%')
                                                 or Q_CONTENT like CONCAT('%',#{keyword},'%')</if>		        
           <if test="option == null or option == ''">1=1</if>
     order by QUESTION_ID desc
     limit #{pageStart}, #{perPageNum}
	</select>

	<select id="listCount" resultType="int">
    select count(QUESTION_ID)
      from QNA
     where <if test="option == 'ID'"> ID like CONCAT('%',#{keyword},'%')</if>
           <if test="option == 'SUBJECT'"> Q_SUBJECT like CONCAT('%',#{keyword},'%')</if>
           <if test="option == 'CONTENT'"> Q_CONTENT like CONCAT('%',#{keyword},'%')</if>
           <if test="option == 'SUBJECT,CONTENT'"> Q_SUBEJECT like CONCAT('%',#{keyword},'%')
                                                 or Q_CONTENT like CONCAT('%',#{keyword},'%')</if>
           <if test="option == null or option == ''">1=1</if>
	</select>




</mapper>